<% shops.each do |shop| %>
  <div class="m-3 p-4 border-top border-bottom border-dark bg-light">
    <div class="d-flex justify-content-center mb-4">
      <%= image_tag shop.show_image, class: "cart-shop-img-resize" %>
    </div>
    <% cart.get_cart_items_from_a_specific_shop(shop).each do |cart_item| %>
      <%= render(ItemRowComponent.new(
        item: cart_item.item
      )) do %>
        <%= render(LinkComponent.new(
          link: cart_item_path(cart_item.id, operation: "minus"),
          icon: :minus,
          html_options: { method: "put", class: "mx-1 z-index-1", remote: true }
        )) %>
        <p id="qty_in_cart_item_<%= cart_item.item.id %>" style="margin-bottom: 0"><%= cart_item.item_qty_in_cart %></p>
        <%= render(LinkComponent.new(
          link: cart_item_path(cart_item.id, operation: "plus"),
          icon: :plus,
          html_options: { method: "put", class: "mx-1 z-index-1", remote: true }
        )) %>
        <div id="total_price_item_<%= cart_item.item.id %>" class="mr-3">
          = <strong><%= cart_item.total_price %>€</strong>
        </div>
        <%= render(LinkComponent.new(
          link: cart_item_path(cart_item.id),
          icon: :delete,
          html_options: { method: "delete", class: "mx-1 z-index-1", remote: true }
        )) %>
      <% end %>
    <% end %>
    <div class="m-3 d-flex justify-content-between">
      <p><%= t("cart.show.shipping_fee_html", href: link_to(t("style.strong_html", content: t("cart.show.adnd_href")), "https://goo.gl/maps/NPUzNAjd2rCjLcVJ8",  { target: "_blank" })) %></p>
      <p id="shop_<%= shop.id %>_total_price"><%= t("cart.show.order_price",  price: cart.get_total_price_from_a_specific_shop(shop)) %></p>
<!--
      <p>Frais de port : <%= shipping_cost(cart.get_shipping_price(shop)) %>€</p>
      <p><strong>Prix total : <%= cart.get_total_price_from_a_specific_shop(shop) + shipping_cost(cart.get_shipping_price(shop)) %>€</strong></p>
-->
    </div>
    <div class="d-flex justify-content-end">
      <%= button_to t("button.order_.from_shop", shop: shop.brand), new_order_path, method: 'get', class: 'btn btn-success', params: {shop_id: shop.id} %>

<!--
      <% if cart.get_shipping_price(shop) > 30000 %>
        <p class="text-center font-italic text-danger">Votre panier ne peux pas être expédié par colis par <%= shop.brand %> car le cumule des articles pèse trop lourd. Veuillez supprimer des articles du panier ou contacter directement notre artisant pour faire vos achats.</p>
      <% else %>
        <%= button_to "Passer commande à #{shop.brand}", new_order_path, method: 'get', class: 'btn btn-success', params: {shop_id: shop.id} %>
      <% end %>
to be added back when shipping will be allowed -->

    </div>
  </div>
<% end %>
